<%- include('../user/layout/header') %>

	<div class="hero-wrap hero-bread" style="background-image: url('/user/images/bg_6.jpg');">
		<div class="container">
		  <div class="row no-gutters slider-text align-items-center justify-content-center">
			<div class="col-md-9 ftco-animate text-center">
			  <p class="breadcrumbs"><span class="mr-2"><a href="/">Home</a></span> <span>Shop</span></p>
			  <h1 class="mb-0 bread">Shop</h1>
			</div>
		  </div>
		</div>
	  </div>
	  

	  <div class="col-md-4 col-lg-2">
		<div class="sidebar">
			<form action="/shop" method="GET" class="search-form">
				<div class="form-group custom-form-element">
					<span class="icon ion-ios-search"></span>
					<input type="text" name="search" class="form-control custom-input" placeholder="Search">
				</div>
				<div class="Dhh custom-form-element">
					<label for="sort" class="custom-label">Sort by:</label>
					<select name="sort" id="sort" class="form-control custom-select">
						<option value="default">Default</option>
						<option value="lowToHigh">Price: Low to High</option>
						<option value="highToLow">Price: High to Low</option>
					</select>
					<button type="submit" class="btn btn-primary mb-3 custom-button">Search</button>
				</div>
			</form>
		</div>
	</div>

	  
			
	<div class="col-md-8 col-lg-10 order-md-last">
		<div class="row">
			<% if (product.length > 0) { %>
				<% product.forEach(productItem => { %>
					<div class="col-sm-12 col-md-12 col-lg-4 ftco-animate d-flex">
						<div class="product d-flex flex-column">
							<a href="/single?id=<%= productItem._id %>" class="img-prod">
								<img class="img-fluid" src="/images/<%= productItem.image[0] %>" alt="Colorlib Template">
								<div class="overlay"></div>
							</a>
							<div class="text py-3 pb-4 px-3">
								<div class="d-flex">
									<div class="cat">
										<span>Lifestyle</span>
									</div>
									<div class="rating">
										<p class="text-right mb-0">
											<a href="#"><span class="ion-ios-star-outline"></span></a>
											<a href="#"><span class="ion-ios-star-outline"></span></a>
											<a href="#"><span class="ion-ios-star-outline"></span></a>
											<a href="#"><span class="ion-ios-star-outline"></span></a>
											<a href="#"><span class="ion-ios-star-outline"></span></a>
										</p>
									</div>
								</div>
								<h3><a href="#"><%= productItem.name %></a></h3>
								<div class="pricing">
									<p class="price"><span>â‚¹<%= productItem.price %></span></p>
								</div>
								<form>
									<button data-product-id="<%= productItem._id %>" type="submit" class="add-to-cart text-center py-2 mr-1">
										<span>Add to cart <i class="ion-ios-add ml-1"></i></span>
									</button>
								</form>	
							</div>
						</div>
					</div>
				<% }) %>
			<% } %>
		</div>
	</div>
	
             <div class="row mt-5">
	                 <div class="col text-center">
	                            <div class="block-27">
		                                            <ul>
		  <% if (currentPage > 1) { %>
			<li><a href="?page=<%= currentPage - 1 %>&sort=<%= sort %>" class="page-link">&laquo;</a></li>
		  <% } %>
		  <% for (let i = 1; i <= totalPages; i++) { %>
			<li><a href="?page=<%= i %>&sort=<%= sort %>" class="<%= i === currentPage ? 'active' : '' %> page-link"><%= i %></a></li>
		  <% } %>
		  <% if (currentPage < totalPages) { %>
			<li><a href="?page=<%= currentPage + 1 %>&sort=<%= sort %>" class="page-link">&raquo;</a></li>
		  <% } %>
		</ul>
	  </div>
	</div>
  </div>
  		
		<section class="ftco-gallery">
    	<div class="container">
    		<div class="row justify-content-center">
    			<div class="col-md-8 heading-section text-center mb-4 ftco-animate">
            <h2 class="mb-4">Follow Us On Instagram</h2>
            <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in</p>
          </div>
    		</div>
    	</div>
    	<div class="container-fluid px-0">
    		<div class="row no-gutters">
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="/user/images/gallery-1.jpg" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/gallery-1.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						<span class="icon-instagram"></span>
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="/user/images/gallery-2.jpg" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/gallery-2.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						<span class="icon-instagram"></span>
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="/user/images/gallery-3.jpg" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/gallery-3.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						<span class="icon-instagram"></span>
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="/user/images/gallery-4.jpg" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/gallery-4.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						<span class="icon-instagram"></span>
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="/user/images/gallery-5.jpg" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/gallery-5.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						<span class="icon-instagram"></span>
    					</div>
						</a>
					</div>
					<div class="col-md-4 col-lg-2 ftco-animate">
						<a href="/user/images/gallery-6.jpg" class="gallery image-popup img d-flex align-items-center" style="background-image: url(images/gallery-6.jpg);">
							<div class="icon mb-4 d-flex align-items-center justify-content-center">
    						<span class="icon-instagram"></span>
    					</div>
						</a>
					</div>
               </div>
    	   </div>
      </section>
	  <footer class="ftco-footer ftco-section">
		<div class="container">
		  <div class="row">
			<div class="mouse">
			  <a href="#" class="mouse-icon">
				<div class="mouse-wheel">
				  <span class="ion-ios-arrow-up"></span>
				</div>
			  </a>
			</div>
		  </div>
		  <div class="row mb-5">
			<div class="col-md">
			  <div class="ftco-footer-widget mb-4">
				<h2 class="ftco-heading-2">Minishop</h2>
				<p>
				  Far far away, behind the word mountains, far from the countries
				  Vokalia and Consonantia.
				</p>
				<ul
				  class="ftco-footer-social list-unstyled float-md-left float-lft mt-5"
				>
				  <li class="ftco-animate">
					<a href="#"><span class="icon-twitter"></span></a>
				  </li>
				  <li class="ftco-animate">
					<a href="#"><span class="icon-facebook"></span></a>
				  </li>
				  <li class="ftco-animate">
					<a href="#"><span class="icon-instagram"></span></a>
				  </li>
				</ul>
			  </div>
			</div>
			<div class="col-md">
			  <div class="ftco-footer-widget mb-4 ml-md-5">
				<h2 class="ftco-heading-2">Menu</h2>
				<ul class="list-unstyled">
				  <li><a href="#" class="py-2 d-block">Shop</a></li>
				  <li><a href="#" class="py-2 d-block">About</a></li>
				  <li><a href="#" class="py-2 d-block">Journal</a></li>
				  <li><a href="#" class="py-2 d-block">Contact Us</a></li>
				</ul>
			  </div>
			</div>
			<div class="col-md-4">
			  <div class="ftco-footer-widget mb-4">
				<h2 class="ftco-heading-2">Help</h2>
				<div class="d-flex">
				  <ul class="list-unstyled mr-l-5 pr-l-3 mr-4">
					<li>
					  <a href="#" class="py-2 d-block">Shipping Information</a>
					</li>
					<li>
					  <a href="#" class="py-2 d-block">Returns &amp; Exchange</a>
					</li>
					<li>
					  <a href="#" class="py-2 d-block">Terms &amp; Conditions</a>
					</li>
					<li><a href="#" class="py-2 d-block">Privacy Policy</a></li>
				  </ul>
				  <ul class="list-unstyled">
					<li><a href="#" class="py-2 d-block">FAQs</a></li>
					<li><a href="#" class="py-2 d-block">Contact</a></li>
				  </ul>
				</div>
			  </div>
			</div>
			<div class="col-md">
			  <div class="ftco-footer-widget mb-4">
				<h2 class="ftco-heading-2">Have a Questions?</h2>
				<div class="block-23 mb-3">
				  <ul>
					<li>
					  <span class="icon icon-map-marker"></span
					  ><span class="text"
						>203 Fake St. Mountain View, San Francisco, California,
						USA</span
					  >
					</li>
					<li>
					  <a href="#"
						><span class="icon icon-phone"></span
						><span class="text">+2 392 3929 210</span></a
					  >
					</li>
					<li>
					  <a href="#"
						><span class="icon icon-envelope"></span
						><span class="text">info@yourdomain.com</span></a
					  >
					</li>
				  </ul>
				</div>
			  </div>
			</div>
		  </div>
		  <div class="row">
			<div class="col-md-12 text-center">
			  <p>
			>
				Copyright &copy;
				<script>
				  document.write(new Date().getFullYear());
				</script>
				All rights reserved | This template is made with
				<i class="icon-heart color-danger" aria-hidden="true"></i> by
				<a href="https://colorlib.com" target="_blank">Colorlib</a>
			
			  </p>
			</div>
		  </div>
		</div>
	  </footer>
   </head>
  


  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


<script>

	document.addEventListener('DOMContentLoaded', function() {

  document.querySelectorAll('.add-to-cart').forEach(button => {
    button.addEventListener('click', async () => {
      const productId = button.getAttribute('data-product-id');
      const quantity = 1;
	  console.log(productId);

      try {
        const response = await fetch(`/addToCart`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ productId, quantity }),
        });

        if (response.ok) {
        
          window.location.href = '/cart';
        } else {
         
          console.error('Failed to add to cart:', response.status);
        }
      } catch (error) {
        console.error('Error adding to cart:', error);
      }
    });
  });
});


</script>


  <script src="/user/js/jquery.min.js"></script>
  <script src="/user/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="/user/js/popper.min.js"></script>
  <script src="/user/js/bootstrap.min.js"></script>
  <script src="/user/js/jquery.easing.1.3.js"></script>
  <script src="/user/js/jquery.waypoints.min.js"></script>
  <script src="/user/js/jquery.stellar.min.js"></script>
  <script src="/user/js/owl.carousel.min.js"></script>
  <script src="/user/js/jquery.magnific-popup.min.js"></script>
  <script src="/user/js/aos.js"></script>
  <script src="/user/js/jquery.animateNumber.min.js"></script>
  <script src="/user/js/bootstrap-datepicker.js"></script>
  <script src="/user/js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="/user/js/google-map.js"></script>
  <script src="/user/js/main.js"></script>

  <style>
	.col-md-4.col-lg-2 {
		width: 100%; /* Set the width to 100% */
		margin-top: 20px;
	}
	
	.sidebar {
		padding: 15px;
		border: 1px solid #ccc;
		border-radius: 5px;
		background-color: #f9f9f9;
	}
	
	.search-form {
		margin-bottom: 20px;
	}
	
	.custom-form-element {
		margin-bottom: 10px;
	}
	
	.custom-form-element .form-control {
		flex: 1;
	}
	
	.custom-form-element .icon {
		margin-right: 10px;
		color: #999;
	}
	
	.custom-label {
		margin-right: 10px;
		font-weight: bold;
		color: #333;
	}
	
	.custom-select {
		flex: 1;
		margin-right: 10px;
	}
	
	.custom-button {
		flex: 1;
		max-width: 100px;
	}
	
	.product:hover img {
    -webkit-transform: scale(1.1);
    -moz-transform: scale(1.1);
    -ms-transform: scale(1.1);
    -o-transform: scale(1.1);
    margin-top: px;
    transform: scale(1.1);
}
	</style>
	


  </body>
</html>