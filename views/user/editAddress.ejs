<%- include('../user/layout/header') %>
    <%- include('../user/layout/nav') %>

        <!DOCTYPE html>
        <html lang="en">

        <head>
            <meta charset="utf-8" />
            <link rel="apple-touch-icon" sizes="76x76" href="/user/img/apple-icon.png">
            <link rel="icon" type="image/png" href="/user/img/favicon.ico">
            <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
            <title>Razo.com</title>
            <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
                name='viewport' />
            <link href="/user/https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
            <link rel="stylesheet"
                href="/user/https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
            <link href="/user/css/bootstrap.min.css" rel="stylesheet" />
            <link href="/user/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />
            <link href="/user/css/demo.css" rel="stylesheet" />
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        </head>


        <style>
            .bg-dark {
                background-color: #dbcc8f !important;
                margin-top: -21px;
            }
        </style>


        <body>
            <style>
                body {
                    font-family: Arial, sans-serif;
                }

                #addAddressContainer {
                    width: 650px;
                    margin: 20px auto;
                    padding: 20px;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
                }

                form {
                    display: flex;
                    flex-direction: column;
                }

                label {
                    display: block;
                    margin-bottom: 8px;
                }

                input {
                    padding: 8px;
                    margin-bottom: 15px;
                    box-sizing: border-box;
                }

                #name {
                    width: 50%;
                }

                #housename {
                    width: 100%;
                }

                #city,
                #state {
                    width: 50%;
                }

                #phone {
                    width: 70%;
                }

                #pincode {
                    width: 30%;
                }

                button {
                    background-color: #000000;
                    color: white;
                    padding: 10px 15px;
                    border: none;
                    border-radius: 4px;
                    cursor: pointer;
                }

                button:hover {
                    background-color: #45a049;
                }

                .error {
                    color: red;
                    margin-top: 5px;
                    display: none;
                }
            </style>


            <div class="wrapper">
                <div class="sidebar" data-image="../user/img/sidebar-5.jpg">


                    <div class="sidebar-wrapper" style="background-color: #f8f8f8;">
                        <div class="logo">
                            <a href="http://www.creative-tim.com" class="simple-text">
                                ShoezZO
                            </a>
                        </div>
                        <ul class="nav">
                            <li class="nav-item active">
                                <a class="nav-link" href="/profile">
                                    <i class="nc-icon nc-circle-09"></i>
                                    <p><B> PROFILE</B></p>
                                </a>
                            </li>
                            <li class="nav-item ">
                                <a class="nav-link" href="/profile/orders">
                                    <i class="nc-icon nc-circle-09"></i>
                                    <p><b>ORDERS</b></p>
                                </a>
                            </li>
                            <li class="nav-item ">
                                <a class="nav-link" href="/profile/address">
                                    <i class="nc-icon nc-circle-09"></i>
                                    <p><B>ADDRESS</B></p>
                                </a>
                            </li>
                            <li class="nav-item ">
                                <a class="nav-link" href="/profile/wallet">
                                    <i class="nc-icon nc-circle-09"></i>
                                    <p><B>WALLET</B></p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="main-panel">


                <!-- Navbar -->
                <nav class="navbar navbar-expand-lg " color-on-scroll="500">
                    <div class="container-fluid">
                        <a style="color: #00ff08;" href="/"><b>HOME</b></a>
                        <a style="margin-left: 10px;color: rgb(36, 241, 0);" href="/shop"><b>SHOP</b></a>
                        <button href="" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                            aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-bar burger-lines"></span>
                            <span class="navbar-toggler-bar burger-lines"></span>
                            <span class="navbar-toggler-bar burger-lines"></span>
                        </button>
                        <div class="collapse navbar-collapse justify-content-end" id="navigation">
                            <ul class="nav navbar-nav mr-auto">
                                <li class="nav-item">
                                    </a>
                                </li>
                            </ul>
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="/logout">
                                        <span style="color: red;" class="no-icon">LOGOUT</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>



                <div id="addAddressContainer">
                    <div id="editAddressContainer">
                        <form id="editAddressForm" action="/profile/editAddress" method="post" onsubmit="return validateForm()">
                            <% if (addressToEdit) { %>
                                <input type="hidden" name="addressId" value="<%= addressToEdit._id %>">

                                <label for="name">Name:</label>
                                <input type="text" id="name" name="name" value="<%= addressToEdit.name %>" required>
                                <span class="error" id="nameError">Please enter a valid name</span>

                                <label for="housename">House Name:</label>
                                <input type="text" id="housename" name="housename"
                                    value="<%= addressToEdit.housename %>" required>
                                <span class="error" id="housenameError">Please enter a valid house name</span>

                                <label for="city">City:</label>
                                <input type="text" id="city" name="city" value="<%= addressToEdit.city %>" required>
                                <span class="error" id="cityError">Please enter a valid city</span>

                                <label for="state">State:</label>
                                <input type="text" id="state" name="state" value="<%= addressToEdit.state %>" required>
                                <span class="error" id="stateError">Please enter a valid state</span>

                                <label for="phone">Phone:</label>
                                <input type="text" id="phone" name="phone" value="<%= addressToEdit.phone %>" required>
                                <span class="error" id="phoneError">Please enter a valid phone number</span>

                                <label for="pincode">Pincode:</label>
                                <input type="text" id="pincode" name="pincode" value="<%= addressToEdit.pincode %>"
                                    required>
                                <span class="error" id="pincodeError">Please enter a valid pincode</span>

                                <button type="submit">Update Address</button>
                                <% } else { %>
                                    <p>Error: Address not found</p>
                                    <% } %>
                        </form>
                    </div>

                    <footer style="margin-top: 45%;" class="footer">
                        <div class="container-fluid">
                            <nav>

                                <p class="copyright text-center">
                                    Â©
                                    <script>
                                        document.write(new Date().getFullYear())
                                    </script>

                                </p>
                            </nav>
                        </div>
                    </footer>
                </div>
            </div>

        </body>
        <!--   Core JS Files   -->
        <script src="/user/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
        <script src="/user/js/core/popper.min.js" type="text/javascript"></script>
        <script src="/user/js/core/bootstrap.min.js" type="text/javascript"></script>

        <script src="/user/js/plugins/bootstrap-switch.js"></script>

        <script src="/user/js/plugins/chartist.min.js"></script>

        <script src="/user/js/plugins/bootstrap-notify.js"></script>

        <script src="/user/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>

        <script src="/user/js/demo.js"></script>

        <script>
            function validateForm() {
                var name = document.getElementById('name').value;
                var housename = document.getElementById('housename').value;
                var city = document.getElementById('city').value;
                var state = document.getElementById('state').value;
                var phone = document.getElementById('phone').value;
                var pincode = document.getElementById('pincode').value;

                var nameError = document.getElementById('nameError');
                var housenameError = document.getElementById('housenameError');
                var cityError = document.getElementById('cityError');
                var stateError = document.getElementById('stateError');
                var phoneError = document.getElementById('phoneError');
                var pincodeError = document.getElementById('pincodeError');

                nameError.style.display = (name === '') ? 'block' : 'none';
                housenameError.style.display = (housename === '') ? 'block' : 'none';
                cityError.style.display = (city === '') ? 'block' : 'none';
                stateError.style.display = (state === '') ? 'block' : 'none';
                phoneError.style.display = (phone === '' || isNaN(phone) || phone.length !== 10) ? 'block' : 'none';
                pincodeError.style.display = (pincode === '' || isNaN(pincode) || pincode.length !== 6) ? 'block' : 'none';

                return (name !== '' && housename !== '' && city !== '' && state !== '' && phone !== '' && !isNaN(phone) && phone.length === 10 && pincode !== '' && !isNaN(pincode) && pincode.length === 6);
            }
        </script>

        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



        <script>
            $(document).ready(function () {
                $('#editAddressForm').on('submit', function (event) {
                    event.preventDefault();
                    var formData = $(this).serialize();

                    $.ajax({
                        url: '/profile/address',
                        method: 'POST',
                        data: formData,
                        success: function (response) {

                            window.location.href = '/profile/address';
                        },
                        error: function (xhr, status, error) {

                            Swal.fire({
                                icon: 'error',
                                title: 'Error!',
                                text: xhr.responseJSON.message || 'Internal Server Error'
                            });
                        }
                    });
                });
            });
        </script>

        </html>
        <%- include('../user/layout/footer') %>