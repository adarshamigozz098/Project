<!DOCTYPE html>
<html lang="en">

<head>
	<style>
		.image-overlay {
			position: relative;
		}
		.image-overlay::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.3);
			opacity: 0;
			transition: opacity 0.3s ease;
		}

		.image-overlay:hover::before {
			opacity: 1;
		}
	</style>
	<style>
		.block-27 ul {
			margin: 100px;
			margin-left: -57PX;
		}
		.image {
			overflow: hidden;
		}
		.image img {
			transform: scale(var(--zoom, 1));
			transform-origin: var(--x) var(--y);
			transition: transform 0.3s ease;
			}
	
		.image:hover {
			--zoom: 3;
		}
	</style>

	<style>
		.btn.btn-primary {
    background: #dbcc8f;
    border: 1px solid #dbcc8f;
    color: #fff;
    margin-inline: 130px;
    margin-top: -63px;
}
	</style>

	<title> SHOEzzo</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">

	<link rel="stylesheet" href="/user/css/open-iconic-bootstrap.min.css">
	<link rel="stylesheet" href="/user/css/animate.css">

	<link rel="stylesheet" href="/user/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/user/css/owl.theme.default.min.css">
	<link rel="stylesheet" href="/user/css/magnific-popup.css">

	<link rel="stylesheet" href="/user/css/aos.css">

	<link rel="stylesheet" href="/user/css/ionicons.min.css">

	<link rel="stylesheet" href="/user/css/bootstrap-datepicker.css">
	<link rel="stylesheet" href="/user/css/jquery.timepicker.css">


	<link rel="stylesheet" href="/user/css/flaticon.css">
	<link rel="stylesheet" href="/user/css/icomoon.css">
	<link rel="stylesheet" href="/user/css/style.css">
</head>

<body class="goto-here">
	<div class="py-1 bg-black">
		<div class="container">
			<div class="row no-gutters d-flex align-items-start align-items-center px-md-0">
				<div class="col-lg-12 d-block">
					<div class="row d-flex">
						<div class="col-md pr-4 d-flex topper align-items-center">
							<div class="icon mr-2 d-flex justify-content-center align-items-center"><span
									class="icon-phone2"></span></div>
							<span class="text">+ 1235 2355 98</span>
						</div>
						<div class="col-md pr-4 d-flex topper align-items-center">
							<div class="icon mr-2 d-flex justify-content-center align-items-center"><span
									class="icon-paper-plane"></span></div>
							<span class="text">youremail@email.com</span>
						</div>
						<div class="col-md-5 pr-4 d-flex topper align-items-center text-lg-right">
							<span class="text">3-5 Business days delivery &amp; Free Returns</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
		<div class="container">
			<a class="navbar-brand" href="/">SHOEzzo</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
				aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="oi oi-menu"></span> Menu
			</button>

			<div class="collapse navbar-collapse" id="ftco-nav">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item active"><a href="/" class="nav-link">Home</a></li>
					<li class="nav-item active"><a href="/shop" class="nav-link">SHOP</a></li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-toggle="dropdown"
							aria-haspopup="true" aria-expanded="false">ACCOUNT</a>
						<div class="dropdown-menu" aria-labelledby="dropdown04">
							<% if (currentUser) { %>
								<div class="dropdown-item">Welcome<%= currentUser.username %>
								</div>
								<a class="dropdown-item" href="/profile">User Profile</a>
								<a class="dropdown-item" href="/checkout">Checkout</a>
								<a class="dropdown-item" href="/logout">Logout</a>

								<% } else { %>
									<a class="dropdown-item" href="/login">LOGIN</a>
									<a class="dropdown-item" href="/signup">REGISTER</a>
									<% } %>
						</div>
					<li class="nav-item cta cta-colored">
						<a href="/cart" class="nav-link">
							<span class="material-icons">
								shopping_cart
							</span>
						</a>
					</li>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="hero-wrap hero-bread" style="background-image: url('/user/images/bg_6.jpg');">
		<div class="container">
			<div class="row no-gutters slider-text align-items-center justify-content-center">
				<div class="col-md-9 ftco-animate text-center">
					<p class="breadcrumbs"><span class="mr-2"><a href="/">Home</a></span> <span>Shop</span></p>
					<h1 class="mb-0 bread">Shop</h1>
				</div>
			</div>
		</div>
	</div>

	<section class="ftco-section">
		<div class="container">
			<div class="row">
				<div class="col-lg-6 mb-5 ftco-animate image" style="cursor: crosshair;">
					<a href="" class="image-popup prod-img-bg">
						<img src="images/<%= product.image?.[0] %>" class="img-fluid" alt="Colorlib Template"
							style="width: 100%; height: 100%;">
					</a>

				</div>
				<div class="col-lg-6 product-details pl-md-5 ftco-animate">
					<h3>
						<%=product.name%>
					</h3>
					<div class="rating d-flex">
						<p class="text-left mr-4">
							<a href="#" class="mr-2">5.0</a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
							<a href="#"><span class="ion-ios-star-outline"></span></a>
						</p>
						<p class="text-left mr-4">
							<a href="#" class="mr-2" style="color: #000;">100 <span
									style="color: #bbb;">Rating</span></a>
						</p>
						<p class="text-left">
							<a href="#" class="mr-2" style="color: #000;">500 <span style="color: #bbb;">Sold</span></a>
						</p>
					</div>
					<p class="price"><span>₹<%=product.price%></span></p>

					<div class="row mt-4">
						<div class="col-md-6">
							<div class="form-group d-flex">
								<!-- <div class="select-wrap">
									<div class="icon"><span class="ion-ios-arrow-down"></span></div>
									<select name="" id="" class="form-control">
										<option value="">Small</option>
										<option value="">Medium</option>
										<option value="">Large</option>
										<option value="">Extra Large</option>
									</select>
								</div> -->
							</div>
						</div>
						<div class="w-100"></div>
						<div class="input-group col-md-6 d-flex mb-3">
							<span class="input-group-btn mr-2">
								<button type="button" class="quantity-left-minus btn" data-type="minus" data-field="">
									<i class="ion-ios-remove"></i>
								</button>
							</span>
							<input type="text" id="quantity" name="quantity" class="quantity form-control input-number"
								value="1" readonly>
							<span class="input-group-btn ml-2">
								<button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
									<i class="ion-ios-add"></i>
								</button>
							</span>
						</div>
						<div class="w-100"></div>
						<div class="col-md-12">
							<% if (product.quantity> 0) { %>
								<p style="color: #000;">
									<%= product.quantity %> piece available
								</p>
								<% } else { %>
									<p style="color: #FF0000;">Out of stock</p>
									<% } %>
						</div>

					</div>
					<button class="custom-add-to-cart" data-productId="<%= product._id %>" id="addToCartBtn">Add to
						Cart</button>
					<a href="/cart" class="btn btn-primary py-3 px-5">Buy now</a>
					<!-- additional images -->
					<div class="row mt-5">
						<div class="col-lg-12">
							<h4></h4>
							<div class="additional-images row">
								<% for (let i=0; i < product.image.length; i++) { %>
									<div class="col-lg-3 mb-4">
										<a href="" class="image-popup prod-img-bg">
											<div class="image-overlay">
												<img src="images/<%= product.image[i] %>"
													class="img-fluid additional-image" alt="Colorlib Template"
													data-index="<%= i %>">
											</div>
										</a>
									</div>
									<% } %>
							</div>
						</div>
					</div>



				</div>

			</div>

			<div class="row mt-5">
				<div class="col-md-12 nav-link-wrap">
					<div class="nav nav-pills d-flex text-center" id="v-pills-tab" role="tablist"
						aria-orientation="vertical">
						<a class="nav-link ftco-animate active mr-lg-1" id="v-pills-1-tab" data-toggle="pill"
							href="#v-pills-1" role="tab" aria-controls="v-pills-1" aria-selected="true">Description</a>

						<a class="nav-link ftco-animate mr-lg-1" id="v-pills-2-tab" data-toggle="pill" href="#v-pills-2"
							role="tab" aria-controls="v-pills-2" aria-selected="false">Manufacturer</a>

						<a class="nav-link ftco-animate" id="v-pills-3-tab" data-toggle="pill" href="#v-pills-3"
							role="tab" aria-controls="v-pills-3" aria-selected="false">Reviews</a>

					</div>
				</div>
				<div class="col-md-12 tab-wrap">

					<div class="tab-content bg-light" id="v-pills-tabContent">

						<div class="tab-pane fade show active" id="v-pills-1" role="tabpanel"
							aria-labelledby="day-1-tab">
							<div class="p-4">
								<h3 class="mb-4">
									<%=product.name%>
								</h3>
								<p>On her way she met a copy. The copy warned the Little Blind Text, that where it came
									from it would have been rewritten a thousand times and everything that was left from
									its origin would be the word "and" and the Little Blind Text should turn around and
									return to its own, safe country. But nothing the copy said could convince her and so
									it didn’t take long until a few insidious Copy Writers ambushed her, made her drunk
									with Longe and Parole and dragged her into their agency, where they abused her for
									their.</p>
							</div>
						</div>

						<!-- <div class="tab-pane fade" id="v-pills-2" role="tabpanel" aria-labelledby="v-pills-day-2-tab">
              	<div class="p-4">
	              	<h3 class="mb-4">Manufactured By Nike</h3>
	              	<p>On her way she met a copy. The copy warned the Little Blind Text, that where it came from it would have been rewritten a thousand times and everything that was left from its origin would be the word "and" and the Little Blind Text should turn around and return to its own, safe country. But nothing the copy said could convince her and so it didn’t take long until a few insidious Copy Writers ambushed her, made her drunk with Longe and Parole and dragged her into their agency, where they abused her for their.</p>
              	</div>
              </div> -->
						<div class="tab-pane fade" id="v-pills-3" role="tabpanel" aria-labelledby="v-pills-day-3-tab">
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>


	<footer class="ftco-footer ftco-section">
		<div class="container">
			<div class="row">
				<div class="mouse">
					<a href="#" class="mouse-icon">
						<div class="mouse-wheel"><span class="ion-ios-arrow-up"></span></div>
					</a>
				</div>
			</div>
			<div class="row mb-5">
				<div class="col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Minishop</h2>
						<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia.</p>
						<ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
							<li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
						</ul>
					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4 ml-md-5">
						<h2 class="ftco-heading-2">Menu</h2>
						<ul class="list-unstyled">
							<li><a href="#" class="py-2 d-block">Shop</a></li>
							<li><a href="#" class="py-2 d-block">About</a></li>
							<li><a href="#" class="py-2 d-block">Journal</a></li>
							<li><a href="#" class="py-2 d-block">Contact Us</a></li>
						</ul>
					</div>
				</div>
				<div class="col-md-4">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Help</h2>
						<div class="d-flex">
							<ul class="list-unstyled mr-l-5 pr-l-3 mr-4">
								<li><a href="#" class="py-2 d-block">Shipping Information</a></li>
								<li><a href="#" class="py-2 d-block">Returns &amp; Exchange</a></li>
								<li><a href="#" class="py-2 d-block">Terms &amp; Conditions</a></li>
								<li><a href="#" class="py-2 d-block">Privacy Policy</a></li>
							</ul>
							<ul class="list-unstyled">
								<li><a href="#" class="py-2 d-block">FAQs</a></li>
								<li><a href="#" class="py-2 d-block">Contact</a></li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-md">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Have a Questions?</h2>
						<div class="block-23 mb-3">
							<ul>
								<li><span class="icon icon-map-marker"></span><span class="text">203 Fake St. Mountain
										View, San Francisco, California, USA</span></li>
								<li><a href="#"><span class="icon icon-phone"></span><span class="text">+2 392 3929
											210</span></a></li>
								<li><a href="#"><span class="icon icon-envelope"></span><span
											class="text">info@yourdomain.com</span></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 text-center">

					<p>
						Copyright &copy;
						<script>document.write(new Date().getFullYear());</script> All rights reserved | This template
						is made with <i class="icon-heart color-danger" aria-hidden="true"></i> by <a
							href="https://colorlib.com" target="_blank">Colorlib</a>						
					</p>
				</div>
			</div>
		</div>
	</footer>


	<!-- loader -->
	<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
			<circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
			<circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
				stroke="#F96D00" />
		</svg></div>


	<script src="/user/js/jquery.min.js"></script>
	<script src="/user/js/jquery-migrate-3.0.1.min.js"></script>
	<script src="/user/js/popper.min.js"></script>
	<script src="/user/js/bootstrap.min.js"></script>
	<script src="/user/js/jquery.easing.1.3.js"></script>
	<script src="/user/js/jquery.waypoints.min.js"></script>
	<script src="/user/js/jquery.stellar.min.js"></script>
	<script src="/user/js/owl.carousel.min.js"></script>
	<script src="/user/js/jquery.magnific-popup.min.js"></script>
	<script src="/user/js/aos.js"></script>
	<script src="/user/js/jquery.animateNumber.min.js"></script>
	<script src="/user/js/bootstrap-datepicker.js"></script>
	<script src="/user/js/scrollax.min.js"></script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
	<script src="/user/js/google-map.js"></script>
	<script src="/user/js/main.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

	<script>
		document.querySelectorAll('.image').forEach(elem => {
			let x, y, width, height;
			elem.onmouseenter = () => {
				const size = elem.getBoundingClientRect()

				x = size.x;
				y = size.y;
				width = size.width;
				height = size.height;
			};
			elem.onmousemove = e => {
				const horizontal = (e.clientX - x) / width * 100;
				const vertical = (e.clientY - y) / height * 100;

				elem.style.setProperty('--x', horizontal + "%");
				elem.style.setProperty('--y', vertical + "%");
			}
		})
	</script>

	
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var quantityInput = $('#quantity');

			$('.quantity-right-plus').click(function (e) {
				e.preventDefault();

				var quantity = parseInt(quantityInput.val());
				var maxQuantity = parseInt("<%= product.quantity %>");

				if (quantity < maxQuantity) {
					$(this).prop('disabled', true);


					quantityInput.val(quantity + 1);


					setTimeout(function () {
						$('.quantity-right-plus').prop('disabled', false);
					}, 200);
				} else {
					Swal.fire({
						icon: 'info',
						title: 'Info',
						text: 'You cannot add more than the available stock!',
					});
				}
			});

			$('.quantity-left-minus').click(function (e) {
				e.preventDefault();

				var quantity = parseInt(quantityInput.val());

				if (quantity > 1) {
					quantityInput.val(quantity - 1);
				}
			});

			document.querySelectorAll('.custom-add-to-cart').forEach(button => {
				button.addEventListener('click', async () => {
					const productId = button.dataset.productid;
					const quantity = quantityInput.val();
					console.log("quantity", quantity);
					console.log("productID", productId);
					try {
						const response = await axios.post(`/addToCart`, { productId, quantity });

						if (response.status >= 200 && response.status < 300) {

							Swal.fire({
								icon: 'success',
								title: 'Product Added to Cart!',
								showCancelButton: true,
								confirmButtonText: 'Go to Cart',
								cancelButtonText: 'Continue Shopping',
							}).then((result) => {
								if (result.isConfirmed) {
									window.location.href = '/cart';
								} else {
									window.location.href = '/shop';
								}
							});
						} else {
							console.error('Failed to add to cart:', response.status);
						}
					} catch (error) {
						console.error('Error adding to cart:', error);
					}
				});
			});
		});
	</script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const additionalImages = document.querySelectorAll('.additional-images img');
			const mainImage = document.querySelector('.main-image img');
			additionalImages.forEach((image, index) => {
				image.addEventListener('click', function () {

					mainImage.src = this.src;
				});
			});
		});
	</script>



</body>
</html>