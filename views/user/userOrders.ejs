<%- include('../user/layout/header') %>


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="/user/img/apple-icon.png">
    <link rel="icon" type="image/png" href="/user/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Light Bootstrap Dashboard - Free Bootstrap 4 Admin Dashboard by Creative Tim</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
 
    <link href="/user/fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="/user/maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
 
    <link href="/user/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/user/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />
 
    <link href="/user/css/demo.css" rel="stylesheet" />
</head>

<body>
    <style>
        .bg-dark {
    background-color: #343a40!important;
    margin-top: -21px;
}
    </style>
    <style>
     
        .card {
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            background-color: lightblue;
            padding: 15px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        .card-body {
            padding: 20px;
        }

        .btn-outline-primary {
            color: #007bff;
            border-color: #007bff;
        }

        .btn-outline-danger {
            color: #dc3545;
            border-color: #dc3545;
        }

        .btn {
            margin-top: 5px;
        }

        .mt-5 {
            margin-top: 5px;
        }

        .damu {
            margin-bottom: -48px;
            margin-left: 4px;
        }

      </style>

            <div class="sidebar-wrapper" style="background-color: #000000;">
                <div class="logo">
                    <a href="http://www.creative-tim.com" class="simple-text">
                        RAZO.com
                    </a>
                </div>
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/profile">
                            <i class="nc-icon nc-circle-09"></i>
                            <p>User Profile</p>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="/profile/orders">
                            <i class="nc-icon nc-circle-09"></i>
                            <p>Orders</p>
                        </a>
                    </li>
                    <li class="nav-item ">
                        <a class="nav-link" href="/profile/address">
                            <i class="nc-icon nc-circle-09"></i>
                            <p>Address</p>
                        </a>
                    </li>

                </ul>
            </div>
        </div>
        <div class="main-panel">
         
            <nav class="navbar navbar-expand-lg " color-on-scroll="500">
                <div class="container-fluid">
                    <a style="color: #00fb268c;" href="/">Home</a>
                    <a style="margin-left: 10px;color: #1eff00;" href="/shop">Shop</a>
                    <button href="" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                        aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navigation">
                        <ul class="nav navbar-nav mr-auto">
                            <li class="nav-item">
                                </a>
                            </li>
                        </ul>
                        <ul class="navbar-nav ml-auto">


                            <li class="nav-item">
                                <a class="nav-link" href="/logout">
                                    <span class="no-icon">Log out</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
       
            <div class="middle-content">
                <% if (Orders.length > 0) { %>
                  <div class="table-responsive">
                    <table class="table table-bordered table-hover">
                      <thead class="thead-dark">
                        <tr>
                          <th scope="col">Order ID</th>
                          <th scope="col">Payment Method</th>
                          <th scope="col">Total Amount</th>
                          <th scope="col">Order Status</th>
                          <th scope="col">Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% Orders.forEach(order => { %>
                          <tr>
                            <td><%= order.order_id %></td>
                            <td><%= order.payment %></td>
                            <td>$<%= order.total_amount.toFixed(2) %></td>
                            <td><%= order.items[0].ordered_status %></td>
                            <td>
                              <a href="/viewDetails?id=<%= order._id%>" class="btn btn-sm btn-outline-primary">View Details</a>
                              <button class="btn btn-sm btn-outline-danger ml-2 cancel-order-btn"onclick="CancelOrder('<%= order._id%>')">Cancel</button>

                            </td>
                          </tr>
                        <% }); %>
                      </tbody>
                    </table>
                  </div>
                <% } else { %>
                  <div class="col-lg-9 text-center mt-4">
                    <h1>No orders found</h1>
                  </div>
                <% } %>
              </div>
              
              
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
   <!-- Add Axios CDN -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
function CancelOrder(cancelId) {

    Swal.fire({
        title: 'Are you sure?',
        text: 'You are about to cancel this order!',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, cancel it!',
        cancelButtonText: 'No, keep it'
    }).then((result) => {
     
        if (result.isConfirmed) {
            // Send Axios request
            axios.post('/cancel-order', { cancelId })
                .then(response => {
                   
                    console.log(response.data);
                   
                    setTimeout(function () {
                        location.reload();
                    }, 1000);
                })
                .catch(error => {
                    // Handle error
                    console.error('Error cancelling order:', error);
                });
        }
    });
}


</script>

<script src="/user/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="/user/js/core/popper.min.js" type="text/javascript"></script>
<script src="/user/js/core/bootstrap.min.js" type="text/javascript"></script>

<script src="/user/js/plugins/bootstrap-switch.js"></script>

<script type="/user/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>

<script src="/user/js/plugins/chartist.min.js"></script>

<script src="/user/js/plugins/bootstrap-notify.js"></script>

<script src="/user/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>

<script src="/user//js/demo.js"></script>


</body>



</html>

<%- include('../user/layout/footer') %>  